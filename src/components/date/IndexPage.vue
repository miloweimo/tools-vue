<template>
  <div id="app">

    <div>
      <h4>ğŸ“…<i>dayjs demo</i>æ—¥æœŸè®¡ç®—</h4>
      æœ¬åœ°æ—¶é—´:<code>{{isodate}}</code>(isodate)
      <hr>

      <b>é€šè¿‡æ—¥æœŸè·å¾—isoå‘¨</b>
      ç‚¹å‡»é€‰æ‹©æ—¥æœŸ: <input type="datetime-local" v-model="date" step="1" style="color: red;">(date)<br>
      *ISOå‘¨ä»æ˜ŸæœŸä¸€å¼€å§‹ï¼Œå‘¨æ—¥ç»“æŸ<br>
      *01 å‘¨çš„ ISO 8601 å®šä¹‰æ˜¯å…¬å†å¹´ï¼ˆå³ä¸€æœˆï¼‰çš„ç¬¬ä¸€ä¸ªæ˜ŸæœŸå››æ‰€åœ¨çš„ä¸€å‘¨<a href="https://en.wikipedia.org/wiki/ISO_week_date">wiki</a><br>
      <code>dayjs(date).endOf('year').isoWeek()</code>({{typeof(d().isoWeek())}})<br>
      <code>dayjs(date).isoWeek()</code>({{typeof(d().isoWeek())}})<br>
      è¿™å¹´å…±<code>{{d(date).endOf('year').isoWeek()}}</code>å‘¨ï¼Œå½“å‰ç¬¬<code>{{d(date).isoWeek()}}</code>å‘¨<br>
      <code>d(date).isoWeekday(1).format('YYYYå¹´MMæœˆDDæ—¥')</code>({{ typeof(d(date).isoWeekday(1).format('YYYYå¹´MMæœˆDDæ—¥')) }})<br>
      å½“å‰å‘¨ä¸€æ—¥æœŸ <code>{{d(date).isoWeekday(1).format('YYYYå¹´MMæœˆDDæ—¥')}}</code><br>
      <code>d(date).isoWeekday(7).format('YYYYMMMDD')</code>({{ typeof(d(date).isoWeekday(7).format('YYYYMMMDD')) }})<br>
      å½“å‰å‘¨æ—¥æ—¥æœŸ <code>{{d(date).isoWeekday(7).format('YYYYMMMDD')}}</code>
      <br>
      <code>d(date).startOf('month').format('YYYYå¹´MMæœˆDDæ—¥')</code>({{ typeof(d(date).startOf('month').format('YYYYå¹´MMæœˆDDæ—¥')) }})
      <br>
      <code>d(date).startOf('month').week()</code>({{ typeof(d(date).startOf('month').week()) }})
      <br>
      è¿™ä¸ªæœˆç¬¬ä¸€å¤©æ˜¯ <code>{{d(date).startOf('month').format('YYYYå¹´MMæœˆDDæ—¥')}}</code>ï¼Œç¬¬<code>{{d(date).startOf('month').week()}}</code>å‘¨ã€‚
      <br>
      <hr>
      
      <b>é€šè¿‡å‘¨æ•°è·å¾—æ—¥æœŸ</b>
      ç‚¹å‡»é€‰æ‹©å‘¨: <input type="number" v-model="year" style="color: red;">(year)å¹´ ç¬¬<input type="number" v-model="weeknumber" style="color: red;">(weeknumber)å‘¨çš„<br>
      <code>d(`${String(year)}-01-28`, 'YYYY-MM-DD').isoWeekday(7).isoWeek(weeknumber - 1).format('YYYY-MM-DD')</code>(string)<br>
      ä¸Šå‘¨æ—¥æ˜¯{{d(`${String(year)}-01-28`, 'YYYY-MM-DD').isoWeekday(7).isoWeek(weeknumber - 1).format('YYYY-MM-DD')}}
      è¿™å‘¨ä¸€æ˜¯{{d(`${String(year)}-01-28`, 'YYYY-MM-DD').isoWeekday(1).isoWeek(weeknumber).format('YYYY-MM-DD')}}<br>
      è¿™å‘¨å…­æ˜¯{{d(`${String(year)}-01-28`, 'YYYY-MM-DD').isoWeekday(-1).isoWeek(weeknumber).format('YYYY-MM-DD')}}
      è¿™å‘¨æ—¥æ˜¯{{d(`${String(year)}-01-28`, 'YYYY-MM-DD').isoWeekday(7).isoWeek(weeknumber).format('YYYY-MM-DD')}}
      <br>
      <a href="https://day.js.org/docs/zh-CN/plugin/iso-week">isoWeekæ–‡æ¡£</a>
      <hr>

      <b>è·å–ä¸€ä¸ªæ—¶é—´çš„å¼€å§‹</b><br>
      <code>d().startOf('year')</code>{{ typeof(d().startOf('year')) }}<br>
      <code>d().startOf('year').format('YYYYMMDD')</code>{{ typeof(d().startOf('year')).format('YYYYMMDD') }}<br>
      ä»Šå¹´ä¸€æœˆ1æ—¥ä¸Šåˆ00:00<code>{{d().startOf('year').format('YYYYMMDD')}}</code><br>
      <a href="https://day.js.org/docs/zh-CN/manipulate/start-of">Start of Timeæ–‡æ¡£</a>
      <hr>

      <b>å…¶ä»–å‚è€ƒ</b>
      <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a>
    </div>
  </div>
</template>

<script>
import dayjs from 'dayjs'
const isoWeek = require('dayjs/plugin/isoWeek')
const weekOfYear = require('dayjs/plugin/weekOfYear')
dayjs.extend(isoWeek)
dayjs.extend(weekOfYear)

export default {
  name: 'App',
  components: {
  },
  data() {
    return {
      d: dayjs,
      isodate: '',
      date: '2077-01-01',
      datenumber: 0,
      weeknumber: 40,
      year: -1,
    }
  },
  mounted() {
    this.datenumber = Number(this.d().format('YYYYMMDD'));
    // dayjs.tz.setDefault("Asia/Shanghai");
    this.date = this.d().format().substring(0, 19);
    this.isodate = this.d().format();
    this.weeknumber = this.d(this.date).isoWeek();
    this.year = Number(this.d().format('YYYY'));
    setInterval(() => {
      this.isodate = this.d().format();
    },1000)
  },  
}

</script>

<style>
#app {
  font-family: Avenir, Helvetica, Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-align: justify;
  color: #2c3e50;
  margin-top: 10px;
}

</style>

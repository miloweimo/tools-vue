<template>
  <div id="date-page">

    <div>
      <h2>ğŸ“…<a href="https://day.js.org/"><i>dayjs</i></a>æ—¥æœŸè½¬æ¢demo</h2>
      <hr>

      <h3>é€šè¿‡æ—¥æœŸå¯¹è±¡Date</h3>
      è¾“å…¥æ—¥æœŸ: <input type="datetime-local" v-model="date" step="1" class="string string-box"> <code class="string">{{`'${date}'`}}</code><br>
      <h4>è·å¾—isoå‘¨æ•°</h4>
      è¿™å¹´å…±nå‘¨: <code>dayjs('{{ date }}').endOf('year').isoWeek()</code><br>
      è¾“å‡º:<code class="number">{{dayjs(date).endOf('year').isoWeek()}}</code><br>
      å½“å‰ç¬¬nå‘¨: <code>dayjs('{{ date.substring(0, 10) }}').isoWeek()</code><br>
      è¾“å‡º: <code class="number">{{dayjs(date.substring(0, 10)).isoWeek()}}</code><br>
      è¿™ä¸ªæœˆç¬¬ä¸€å¤©å‘¨æ•°: <code>dayjs(date).startOf('month').isoWeek()</code><br>
      è¾“å‡º: <code class="number">{{dayjs(date).startOf('month').isoWeek()}}</code><br>
      <h4>è·å¾—æ—¥æœŸ</h4>
      å½“å‰å‘¨å‘¨ä¸€æ—¥æœŸ: <code>dayjs(date).isoWeekday(1)</code><br>
      è¾“å‡º: <code class="string">'{{dayjs(date).isoWeekday(1)}}'</code><br>
      å½“å‰å‘¨å‘¨æ—¥æ—¥æœŸYYYY-MM-DD: <code>dayjs(date).isoWeekday(7).format('YYYY-MM-DD')</code><br>
      è¾“å‡º: <code class="string">'{{dayjs(date).isoWeekday(7).format('YYYY-MM-DD')}}'</code><br>
      è¿™å¹´ä¸€æœˆä¸€æ—¥ä¸Šåˆ00:00: <code>dayjs(date).startOf('year').format('YYYY-MM-DD HH:mm:ss')</code><br>
      è¾“å‡º: <code class="string">'{{dayjs(date).startOf('year').format('YYYY-MM-DD HH:mm:ss')}}'</code><br>
      <br>

      <h3>é€šè¿‡å¹´ä»½å’Œå‘¨æ•°</h3>
      <h4>è·å¾—æ—¥æœŸ</h4>
      è¾“å…¥å¹´å’Œå‘¨: <input type="number" v-model="year" class="number number-box" style="width: 4.5rem;"> <input type="number" v-model="weeknumber" class="number number-box" style="width: 4.5rem;"><br>
      è¿™å‘¨ä¸€æ—¥æœŸYYYY-MM-DD: <code>dayjs(`${String(year)}-01-19`, 'YYYY-MM-DD').isoWeekday(1).isoWeek(weeknumber).format('YYYY-MM-DD')</code><br>
      è¾“å‡º: <code class="string">'{{dayjs(`${String(year)}-01-19`, 'YYYY-MM-DD').isoWeekday(1).isoWeek(weeknumber).format('YYYY-MM-DD')}}'</code><br>
      è¿™å‘¨å…­æ—¥æœŸYYYY-MM-DD: <code>dayjs(`${String(year)}-01-28`, 'YYYY-MM-DD').isoWeekday(-1).isoWeek(weeknumber).format('YYYY-MM-DD')</code><br>
      è¾“å‡º: <code class="string">'{{dayjs(`${String(year)}-01-28`, 'YYYY-MM-DD').isoWeekday(-1).isoWeek(weeknumber).format('YYYY-MM-DD')}}'</code><br>
      è¿™å‘¨æ—¥æ—¥æœŸYYYY-MM-DD: <code>dayjs(`${String(year)}-01-28`, 'YYYY-MM-DD').isoWeekday(7).isoWeek(weeknumber).format('YYYY-MM-DD')</code><br>
      è¾“å‡º: <code class="string">'{{dayjs(`${String(year)}-01-28`, 'YYYY-MM-DD').isoWeekday(7).isoWeek(weeknumber).format('YYYY-MM-DD')}}'</code><br>
      ä¸Šå‘¨æ—¥æ—¥æœŸYYYY-MM-DD: <code>dayjs(`${String(year)}-01-28`, 'YYYY-MM-DD').isoWeekday(7).isoWeek(weeknumber - 1).format('YYYY-MM-DD')</code><br>
      è¾“å‡º: <code class="string">'{{dayjs(`${String(year)}-01-28`, 'YYYY-MM-DD').isoWeekday(7).isoWeek(weeknumber - 1).format('YYYY-MM-DD')}}'</code><br>
      <br>
      <hr>

      <h3>å…¶ä»–å‚è€ƒ</h3>
      ISOå‘¨ ä»æ˜ŸæœŸä¸€å¼€å§‹,å‘¨æ—¥ç»“æŸ<br>
      01 å‘¨çš„ <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a> å®šä¹‰æ˜¯å…¬å†å¹´ï¼ˆå³ä¸€æœˆï¼‰çš„ç¬¬ä¸€ä¸ªæ˜ŸæœŸå››æ‰€åœ¨çš„ä¸€å‘¨<a href="https://en.wikipedia.org/wiki/ISO_week_date">wiki</a><br>
      <a href="https://dayjs.gitee.io/zh-CN/">Day.js ä¸­æ–‡æ–‡æ¡£</a><br>
      <a href="https://day.js.org/docs/zh-CN/manipulate/start-of">Start of Timeæ–‡æ¡£</a>
    </div>
  </div>
</template>

<script>
import dayjs from 'dayjs'
const isoWeek = require('dayjs/plugin/isoWeek')
const weekOfYear = require('dayjs/plugin/weekOfYear')
dayjs.extend(isoWeek)
dayjs.extend(weekOfYear)

export default {
  name: 'App',
  components: {
  },
  data() {
    return {
      dayjs,
      isodate: '',
      date: '2077-01-01',
      datenumber: 0,
      weeknumber: 40,
      year: -1,
    }
  },
  mounted() {
    this.datenumber = Number(this.dayjs().format('YYYYMMDD'));
    // dayjs.tz.setDefault("Asia/Shanghai");
    this.date = this.dayjs().format().substring(0, 19);
    this.isodate = this.dayjs().format();
    this.weeknumber = this.dayjs(this.date).isoWeek();
    this.year = Number(this.dayjs().format('YYYY'));
    setInterval(() => {
      this.isodate = this.dayjs().format();
    },1000)
  },  
}

</script>

<style scoped>
.number {
  color: blue !important;
}

.string {
  color: tomato !important;
}

.number-box {
  border: 1px solid blue;
  border-radius: 0.3rem;
}

.string-box {
  border: 1px solid tomato;
  border-radius: 0.3rem;
}
</style>
